<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="change password.js"></script>


<div class="container">
<div class="row">
<div class="col-sm-12">
<h1>Change Password</h1>
</div>
</div>
<div class="row">
<div class="col-sm-6 col-sm-offset-3">
<p class="text-center">Use the form below to change your password. Your password cannot be the same as your username.</p>
</div>
<input type="username" class="input-lg form-control" name="username" id="username" placeholder="enter username" autocomplete="off">
<div class="row">
<div class="col-sm-12">
<form method="post" id="passwordForm">
<input type="password" class="input-lg form-control" name="password1" id="password1" placeholder="Password" autocomplete="off">
<div class="row">
<div class="col-sm-6">
</div>
</div>
<input type="password" class="input-lg form-control" name="password2" id="password2" placeholder="new Password" autocomplete="off">
<div class="row">
<div class="col-sm-12">
<span id="pwmatch" class="glyphicon glyphicon-remove" style="color:#FF0004;"></span> Passwords Match
</div>
</div>
<div class="buttonWrapper">
    <button type="submit" id="submitButton" onclick="validateSignupForm()" class="submitButton pure-button pure-button-primary">
      <span>Continue</span>
      <span id="loader"></span>
    </button>
  </div>
</div>
            </div>
        </form>

</div><!--/col-sm-6-->
</div><!--/row-->
</div>
<script>
  var url = "https://surfacenewservice.herokuapp.com";
  var wordpressUrl = "https://surfacenewservice.herokuapp.com";
  function pressKey(e){
      if (e.keyCode == 13) {
          validate(event);
      }
  }

  function validate(event){
      event.preventDefault();
      console.log("RESET");
      //Calling the API - 
      $.ajax({
        type: "POST",
           beforeSend: function(request) {
              request.setRequestHeader("Access-Control-Allow-Headers", "X-Requested-With, content-type");
              request.setRequestHeader("Access-Control-Allow-Origin", "*");
           },
          url: url + "/Reporters/changepassword",
          contentType: "application/json",
          dataType: 'json',
          data: JSON.stringify({
              username : document.getElementById("username").value,
              password : document.getElementById("password").value,
              npassword : document.getElementById("newpassword").value
              
          }),
          success: function(result){
              console.log("Here "+result);
              sessionStorage.setItem("user", JSON.stringify(result["user"]));
              sessionStorage.setItem("lg", 1);
              sessionStorage.setItem("url", url);
              location.href = "loginPAGE.html";
          },
          error: function(result){
              var json = $.parseJSON(result.responseText);
              swal({
                  title: json.status,
                  text: json.message,
                  icon: "error",
              });
          }
      })

  }
</script>
</body>
</html>